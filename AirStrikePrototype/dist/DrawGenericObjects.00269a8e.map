{"version":3,"sources":["DrawGenericObjects.js"],"names":["Draw","gl","programInfo","Objects","fieldOfView","Math","PI","aspect","canvas","clientWidth","clientHeight","zNear","zFar","ProjectionMatrix","mat4","create","perspective","ViewMatrix","lookAt","vec3","fromValues","eyeX","eyeY","eyeZ","lookAtX","lookAtY","lookAtZ","upX","upY","upZ","StackModelMatrix","DrawGenericObject","lastMatrix","pop","currentModelMatrix","ModelMatrix","multipliedModelMatrices","multiply","push","Texture","DrawBasicTexture","Buffers","LightPos","Luminous","DrawBasic","Illuminant","CountAdjObj","AdjObj","length","i","buffers","proInfo","mode","numComponents","type","FLOAT","normalize","stride","offset","bindBuffer","ARRAY_BUFFER","VertexBuffer","vertexAttribPointer","attribLocations","vertexPosition","enableVertexAttribArray","NormalBuffer","normalPosition","color","vertexColor","useProgram","program","uniformMatrix4fv","uniformLocations","projectionMatrix","uniform3f","lightPosition","drawArrays","TRIANGLE_STRIP","numVertices","TextureBuffer","textureCoordPosition","uniform1i","Sampler","bindTexture","TEXTURE_2D"],"mappings":"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","file":"DrawGenericObjects.00269a8e.map","sourceRoot":"..","sourcesContent":["function Draw(gl, programInfo, Objects)\n{\n    // Initialize Projection and View Matrix\n    const fieldOfView = 100 * Math.PI / 180;   // in radians\n    const aspect = gl.canvas.clientWidth / gl.canvas.clientHeight;\n    const zNear = 1;\n    const zFar = 100.0;\n    const ProjectionMatrix = mat4.create();\n    mat4.perspective(ProjectionMatrix,\n        fieldOfView,\n        aspect,\n        zNear,\n        zFar);\n\n    const ViewMatrix = mat4.create();\n    mat4.lookAt(ViewMatrix,\n        vec3.fromValues(eyeX, eyeY, eyeZ),\n        vec3.fromValues(lookAtX, lookAtY, lookAtZ),\n        vec3.fromValues(upX, upY, upZ));\n\n    let StackModelMatrix = [mat4.create()];\n    DrawGenericObject(gl, programInfo, Objects, ProjectionMatrix, ViewMatrix, StackModelMatrix);\n}\n\nfunction DrawGenericObject(gl, programInfo, Objects, ProjectionMatrix, ViewMatrix, StackModelMatrix)\n{\n    let lastMatrix = StackModelMatrix.pop();\n    let currentModelMatrix = Objects.ModelMatrix;\n    let multipliedModelMatrices = mat4.create();\n    multipliedModelMatrices = mat4.multiply(multipliedModelMatrices, lastMatrix, currentModelMatrix);\n    StackModelMatrix.push(lastMatrix);\n    StackModelMatrix.push(multipliedModelMatrices);\n\n    if (Objects.Texture != null)\n    {\n        DrawBasicTexture(gl, Objects.Buffers, programInfo.Texture,\n            ProjectionMatrix, ViewMatrix, multipliedModelMatrices, Objects.LightPos, \"Texture\", Objects.Texture);\n    }\n    else {\n        if (Objects.Luminous)\n            DrawBasic(gl, Objects.Buffers, programInfo.Illuminant,\n                ProjectionMatrix, ViewMatrix, multipliedModelMatrices, Objects.LightPos, \"Illuminant\");\n        else\n            DrawBasic(gl, Objects.Buffers, programInfo.Objects,\n                ProjectionMatrix, ViewMatrix, multipliedModelMatrices, Objects.LightPos, \"Object\");\n    }\n\n    const CountAdjObj = Objects.AdjObj.length;\n    for (let i = 0; i < CountAdjObj; i++)\n    {\n        DrawGenericObject(gl, programInfo, Objects.AdjObj[i], ProjectionMatrix, ViewMatrix, StackModelMatrix);\n    }\n    StackModelMatrix.pop();\n}\n\nfunction DrawBasic(gl, buffers, proInfo, ProjectionMatrix, ViewMatrix, ModelMatrix, LightPos, mode)\n{\n    let numComponents = 3;\n    let type = gl.FLOAT;\n    let normalize = false;\n    let stride = 0;\n    let offset = 0;\n\n    gl.bindBuffer(gl.ARRAY_BUFFER, buffers.VertexBuffer);\n    gl.vertexAttribPointer(\n        proInfo.attribLocations.vertexPosition,\n        numComponents,\n        type,\n        normalize,\n        stride,\n        offset);\n    gl.enableVertexAttribArray(\n        proInfo.attribLocations.vertexPosition);\n\n    // Only the normal vectors of the non-illuminant object matter.\n    if (mode == \"Object\" || mode == \"Texture\") {\n        numComponents = 3;\n        type = gl.FLOAT;\n        normalize = false;\n        stride = 0;\n        offset = 0;\n        gl.bindBuffer(gl.ARRAY_BUFFER, buffers.NormalBuffer);\n        gl.vertexAttribPointer(\n            proInfo.attribLocations.normalPosition,\n            numComponents,\n            type,\n            normalize,\n            stride,\n            offset);\n        gl.enableVertexAttribArray(\n            proInfo.attribLocations.normalPosition);\n    }\n\n    numComponents = 4;\n    type = gl.FLOAT;\n    normalize = false;\n    stride = 0;\n    offset = 0;\n    gl.bindBuffer(gl.ARRAY_BUFFER, buffers.color);\n    gl.vertexAttribPointer(\n        proInfo.attribLocations.vertexColor,\n        numComponents,\n        type,\n        normalize,\n        stride,\n        offset);\n    gl.enableVertexAttribArray(\n        proInfo.attribLocations.vertexColor);\n\n    gl.useProgram(proInfo.program);\n    gl.uniformMatrix4fv(\n        proInfo.uniformLocations.projectionMatrix,\n        false,\n        ProjectionMatrix);\n    gl.uniformMatrix4fv(\n        proInfo.uniformLocations.ViewMatrix,\n        false,\n        ViewMatrix);\n    gl.uniformMatrix4fv(\n        proInfo.uniformLocations.ModelMatrix,\n        false,\n        ModelMatrix);\n    gl.uniform3f(\n        proInfo.uniformLocations.lightPosition,\n        LightPos[0], LightPos[1], LightPos[2]);\n\n    gl.drawArrays(gl.TRIANGLE_STRIP, 0, buffers.numVertices);\n}\n\nfunction DrawBasicTexture(gl, buffers, proInfo, ProjectionMatrix, ViewMatrix, ModelMatrix, LightPos, mode, Texture)\n{\n    let numComponents = 3;\n    let type = gl.FLOAT;\n    let normalize = false;\n    let stride = 0;\n    let offset = 0;\n\n    gl.bindBuffer(gl.ARRAY_BUFFER, buffers.VertexBuffer);\n    gl.vertexAttribPointer(\n        proInfo.attribLocations.vertexPosition,\n        numComponents,\n        type,\n        normalize,\n        stride,\n        offset);\n    gl.enableVertexAttribArray(\n        proInfo.attribLocations.vertexPosition);\n\n    // Only the normal vectors of the non-illuminant object matter.\n    if (mode == \"Object\" || mode == \"Texture\") {\n        numComponents = 3;\n        type = gl.FLOAT;\n        normalize = false;\n        stride = 0;\n        offset = 0;\n        gl.bindBuffer(gl.ARRAY_BUFFER, buffers.NormalBuffer);\n        gl.vertexAttribPointer(\n            proInfo.attribLocations.normalPosition,\n            numComponents,\n            type,\n            normalize,\n            stride,\n            offset);\n        gl.enableVertexAttribArray(\n            proInfo.attribLocations.normalPosition);\n    }\n\n    numComponents = 2;\n    type = gl.FLOAT;\n    normalize = false;\n    stride = 0;\n    offset = 0;\n    gl.bindBuffer(gl.ARRAY_BUFFER, buffers.TextureBuffer);\n    gl.vertexAttribPointer(\n        proInfo.attribLocations.textureCoordPosition,\n        numComponents,\n        type,\n        normalize,\n        stride,\n        offset);\n    gl.enableVertexAttribArray(\n        proInfo.attribLocations.textureCoordPosition);\n    gl.uniform1i(proInfo.Sampler, 0);\n\n\n    gl.useProgram(proInfo.program);\n    gl.uniformMatrix4fv(\n        proInfo.uniformLocations.projectionMatrix,\n        false,\n        ProjectionMatrix);\n    gl.uniformMatrix4fv(\n        proInfo.uniformLocations.ViewMatrix,\n        false,\n        ViewMatrix);\n    gl.uniformMatrix4fv(\n        proInfo.uniformLocations.ModelMatrix,\n        false,\n        ModelMatrix);\n    gl.uniform3f(\n        proInfo.uniformLocations.lightPosition,\n        LightPos[0], LightPos[1], LightPos[2]);\n\n    gl.bindTexture(gl.TEXTURE_2D, Texture);\n    gl.drawArrays(gl.TRIANGLE_STRIP, 0, buffers.numVertices);\n}"]}